<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Timers &mdash; Lidi 0.8.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=86f27845" />

  
  
        <script src="_static/jquery.js?v=8dae8fb0"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=486e5634"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Sample applications to exchanging files" href="files.html" />
    <link rel="prev" title="Metrics" href="metrics.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Lidi
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="gstarted.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="session.html">Session</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Command line parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration_file.html">Configuration file</a></li>
<li class="toctree-l1"><a class="reference internal" href="network.html">Network configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance and fiability parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metrics</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Timers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#heartbeat">Heartbeat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#blocks-and-sessions-timeouts">Blocks and sessions timeouts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#block-timeout">Block timeout</a></li>
<li class="toctree-l3"><a class="reference internal" href="#session-timeout">Session timeout</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="files.html">Sample applications to exchanging files</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Lidi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Timers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/timers.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="timers">
<span id="id1"></span><h1>Timers<a class="headerlink" href="#timers" title="Link to this heading"></a></h1>
<section id="heartbeat">
<h2>Heartbeat<a class="headerlink" href="#heartbeat" title="Link to this heading"></a></h2>
<p>Since the purpose of the diode is to only allow one-way data traffic, the sender cannot be aware if a receiver is set up or not. But heartbeat messages are regularly sent through the diode so that the receiver can be aware of a sender disconnection. Heartbeat interval can be set with the following <a class="reference internal" href="configuration_file.html#configuration-file"><span class="std std-ref">Configuration file</span></a>. It must be the same on both sides:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">heartbeat</span> <span class="o">=</span> <span class="mi">1000</span>
</pre></div>
</div>
<p>The default value of 1000 milliseconds means, for the sender a heartbeat message is sent every 1 second. On the receiver side, if no heartbeat message arrives in two times this value, a warning message will be printed in the logs (i.e. warnings are displayed whenever during 2 seconds no heartbeat message was received).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Due to latency, network jitter and processing delay, the heartbeat value on receiver side is automatically doubled compared to the sender.</p>
</div>
<p>Heartbeat value is used as default value for timeouts too, see bellow.</p>
</section>
<section id="blocks-and-sessions-timeouts">
<span id="timeouts"></span><h2>Blocks and sessions timeouts<a class="headerlink" href="#blocks-and-sessions-timeouts" title="Link to this heading"></a></h2>
<p>Since lidi uses UDP protocol to transfer data, blocks and datagrams have to be reordered at application level.
Link is unidirectionnal, so there is no way to ask for status or retransmission. Lidi receiver’s side has to make choices depending on what it receives.
Of course, there are start and end of streams markers, but when packets are missing and arrives in any order, it is difficult to be sure of what happens.</p>
<p>Thus, there are two configurable timers in lidi diode-receive.
One is used to decide when to force reassembly of the current block.
The other is used to decide when a session must be closed because we are not receive blocks anymore.</p>
<section id="block-timeout">
<h3>Block timeout<a class="headerlink" href="#block-timeout" title="Link to this heading"></a></h3>
<p>If we miss parts of the current block and no more packet is received during <cite>block_expiration_timeout</cite>, we assume packets are lost and will never arrives. So we force decoding the current block with all data received (but this may fail if too many packets are missing).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">receiver</span><span class="p">]</span>
<span class="n">block_expiration_timeout</span> <span class="o">=</span> <span class="mi">1000</span>
</pre></div>
</div>
<p>Default value if not set: Same value than heartbeat.</p>
<p>When a block is lost, the whole current session is lost. See <a class="reference internal" href="session.html#session"><span class="std std-ref">Session</span></a>.</p>
</section>
<section id="session-timeout">
<h3>Session timeout<a class="headerlink" href="#session-timeout" title="Link to this heading"></a></h3>
<p>The second is used to decide when to force closing a current session transfer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">receiver</span><span class="p">]</span>
<span class="n">session_expiration_timeout</span> <span class="o">=</span> <span class="mi">5000</span>
</pre></div>
</div>
<p>Default value if not set: Same value than five times the heartbeat value.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="metrics.html" class="btn btn-neutral float-left" title="Metrics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="files.html" class="btn btn-neutral float-right" title="Sample applications to exchanging files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, ANSSI-FR.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>