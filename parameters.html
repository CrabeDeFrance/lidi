<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic command line parameters &mdash; Lidi 0.8.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=486e5634"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Performance and fiability parameters" href="performance.html" />
    <link rel="prev" title="Getting started" href="gstarted.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Lidi
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="gstarted.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Basic command line parameters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#session">Session</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#adresses-and-ports">Adresses and ports</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tcp-data-source">TCP data source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tcp-data-destination">TCP data destination</a></li>
<li class="toctree-l3"><a class="reference internal" href="#udp-transfer">UDP transfer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#timeouts">Timeouts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heartbeat-not-implemented">Heartbeat (NOT IMPLEMENTED)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="performance.html">Performance and fiability parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="files.html">Exchanging files with Lidi</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Lidi</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Basic command line parameters</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/parameters.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="basic-command-line-parameters">
<span id="command-line-parameters"></span><h1>Basic command line parameters<a class="headerlink" href="#basic-command-line-parameters" title="Link to this heading"></a></h1>
<p>When running <cite>diode-send</cite> and <cite>diode-receive</cite> with cargo, command line parameters must appear after after double-hyphen separator. For example, to display all available options for the sender part:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cargo run --release --bin diode-send -- --help
</pre></div>
</div>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Here is a diagram of the components involved in an example usage of lidi, annotated with command line parameters:</p>
<p>TO BE UPDATED (command line parameters &amp; ports to be updated)</p>
<img alt="_images/schema.svg" src="_images/schema.svg" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Parameters that are displayed in the gray box must be the same of both sides (sender and receiver) of lidi.</p>
</div>
<section id="session">
<h3>Session<a class="headerlink" href="#session" title="Link to this heading"></a></h3>
<p>A session is a TCP connection opened on sender side, by an application, in order to send data. A session (the TCP connection) can be used to send any type of data, for instance one or multiple files. The application (not lidi) is responsible of managing a specific protocol to send data and metadata (for instance the content of a file and the filename).
Lidi only manages session’s start or end. On the receiver side, lidi diode-receive will open and close TCP sessions to a receiver application (like diode-receive-file), in respect of happened on sender side.
Due to technical constraints, the sender must close the session when data transfer is done. The sender side cannot keep TCP connections opened without sending any data, for instance to reuse it later. Application must open a TCP connection, send data, then close it.
Lidi receiver will automatically close unused session after some time (see the <a class="reference internal" href="#timeouts"><span class="std std-ref">Timeouts</span></a> chapter for more details on how to configure session’s timeout).</p>
<p>Following, we provide some details about each command line options.</p>
</section>
</section>
<section id="adresses-and-ports">
<h2>Adresses and ports<a class="headerlink" href="#adresses-and-ports" title="Link to this heading"></a></h2>
<p>As shown in the <a class="reference internal" href="gstarted.html#getting-started"><span class="std std-ref">Getting started</span></a> chapter, default values work well for testing the diode on a single machine. But for real application, ip addresses and ports must be configured properly. There are three points in the diode chain where those settings should be provided.</p>
<section id="tcp-data-source">
<h3>TCP data source<a class="headerlink" href="#tcp-data-source" title="Link to this heading"></a></h3>
<p>The diode-send side gets data from TCP connections (for instance, to receive data from diode-send-file). It is necessary to specify IP address and port in which TCP connections will be accepted with the following parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">bind</span><span class="o">-</span><span class="n">tcp</span> <span class="o">&lt;</span><span class="n">ip</span><span class="p">:</span><span class="n">port</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Default value is 127.0.0.1:5001.</p>
</section>
<section id="tcp-data-destination">
<h3>TCP data destination<a class="headerlink" href="#tcp-data-destination" title="Link to this heading"></a></h3>
<p>On the diode-receive side, data will be sent to TCP connected client (for instance, to connect to diode-receive-file). To specify listening IP and TCP port:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">to</span><span class="o">-</span><span class="n">tcp</span> <span class="o">&lt;</span><span class="n">ip</span><span class="p">:</span><span class="n">port</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Default value is 127.0.0.1:5002.</p>
</section>
<section id="udp-transfer">
<h3>UDP transfer<a class="headerlink" href="#udp-transfer" title="Link to this heading"></a></h3>
<p>UDP transfer is used to transfer data from diode-send and diode-receive. Settings IP address and UDP port is necessary. On the sender side:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">to</span><span class="o">-</span><span class="n">udp</span> <span class="o">&lt;</span><span class="n">ip</span><span class="p">:</span><span class="n">port</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>There is no default value for this, it has to be set to IP of the server running diode-receive.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">bind</span><span class="o">-</span><span class="n">udp</span> <span class="o">&lt;</span><span class="n">ip</span><span class="p">:</span><span class="n">port</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Default value is 0.0.0.0:0.</p>
<p>On the receiver side, the option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">bind</span><span class="o">-</span><span class="n">udp</span> <span class="o">&lt;</span><span class="n">ip</span><span class="p">:</span><span class="n">port</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>There is no default value for this, it has to be set to the same value than –to-udp (diode-send).</p>
</section>
</section>
<section id="timeouts">
<span id="id1"></span><h2>Timeouts<a class="headerlink" href="#timeouts" title="Link to this heading"></a></h2>
<p>Since lidi uses UDP protocol to transfer data, blocks and datagrams have to be reordered at application level.
Link is unidirectionnal, so there is no way to ask for status or retransmission. Lidi receiver’s side has to make choices depending on what it receives.
Of course, there are start and end of streams markers, but when packets are missing and arrives in any order, it is difficult to be sure of what happens.</p>
<p>Thus, there are two configurable timers in lidi diode-receive.
One is used to decide when to force reassembly of the current block.
If we miss parts of the current block and no more packet is received during ‘flush-timeout’ delay, we force decoding the current block with data received (this may fail if too many parts are missing).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">flush</span><span class="o">-</span><span class="n">timeout</span> <span class="o">&lt;</span><span class="n">nb_milliseconds</span><span class="o">&gt;</span>
  <span class="p">(</span><span class="n">receiver</span> <span class="n">side</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="mi">500</span><span class="p">)</span>
</pre></div>
</div>
<p>The second is used to decide when to force closing a current session transfer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">session</span><span class="o">-</span><span class="n">expiration</span><span class="o">-</span><span class="n">delay</span> <span class="o">&lt;</span><span class="n">seconds</span><span class="o">&gt;</span>
  <span class="p">(</span><span class="n">receiver</span> <span class="n">side</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="heartbeat-not-implemented">
<h2>Heartbeat (NOT IMPLEMENTED)<a class="headerlink" href="#heartbeat-not-implemented" title="Link to this heading"></a></h2>
<p>Since the purpose of the diode is to only allow one-way data traffic, the sender cannot be aware if a receiver is set up or not. But heartbeat messages are regularly sent through the diode so that the receiver can be aware of a sender disconnection. Heartbeat times can be set with the following option on both sides:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">heartbeat</span> <span class="o">&lt;</span><span class="n">nb_milliseconds</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>The default value is 100 milliseconds for the sender (i.e. a heartbeat message is sent every 5 seconds) and 200 milliseconds for the receiver (i.e. warnings are displayed whenever during 10 seconds no heartbeat message was received). Due to latency, timeouts and network load, the receiver value must always be greater than the sender value.</p>
<p>Further heartbeat implementation could be used to allow application to keep his TCP connection active, even it is not used to send data.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="gstarted.html" class="btn btn-neutral float-left" title="Getting started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="performance.html" class="btn btn-neutral float-right" title="Performance and fiability parameters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, ANSSI-FR.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>